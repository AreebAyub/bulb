usage = 2; kwh = 27; id = 6
function update() {for (let i = 0; i < $("tr").length - 2; i++) {for (let j = 5; j < $("td").length / ($("tr").length - 2) + 2; j++) {if ($("th")[j + 1].innerHTML.substring($("th")[j + 1].innerHTML.length - 3) == "rs:" || $("th")[j + 1].innerHTML.substring($("th")[j + 1].innerHTML.length - 3) == "Yr:") {yr = 12} else {yr = 1}; $("td")[j + i * $("td").length / ($("tr").length - 2) - 2].innerHTML = "£" + Math.round(Math.round(parseFloat($("td")[i * $("td").length / ($("tr").length - 2)].innerHTML.substring(1)) * 100) * Math.ceil(usage * 30 * yr * parseInt($("th")[j + 1].innerHTML) / parseFloat($("td")[i * $("td").length / ($("tr").length - 2) + 2].innerHTML)) + usage * 30 * yr * parseInt($("th")[j + 1].innerHTML) * parseFloat($("td")[i * $("td").length / ($("tr").length - 2) + 1].innerHTML) / 1000 * kwh) / 100}}}
$("#update").click(function() {usage = parseFloat($("form")[0][0].value); kwh = Math.round(parseFloat($("form")[0][1].value) * 100); if ($("form")[0][2].checked) {td = ""; for (i = 0; i < $("#colspan").attr("colspan").toString(); i++) {td += "<td>£</td>"}; $("tbody").append(`<tr id = ${id}><th scope = row>${$("form")[0][3].value}</th><td>£${$("form")[0][4].value}</td><td>${$("form")[0][5].value}W</td><td>${$("form")[0][6].value}hrs</td>${td}</tr>`); id ++}; if ($("form")[0][7].checked) {$("#colspan").attr("colspan", (parseInt($("#colspan").attr("colspan")) + 1).toString()); for (i = 1; i < $("tr").length; i ++) {if (i == 1) {$("#1").append(`<th>${$("form")[0][8].value} Mos</th>`)} else {$(`#${i}`).append("<td>£</td>")}}}; update()}); update()